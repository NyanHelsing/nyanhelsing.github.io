# AIFoo

## Introduction

Based in the concept of "dogfooding", AiFoo is a AI code repository assistant system that uses itself to manage its own codebase. (or any other codebase, by changing the path to the source code).

It works by generating a summary of each file in the codebase. Then it uses these summarys to generate a _codebase_ summary of all the files in the codebase. This _codebase_ summary is then used to generate tickets using a 6-tier hierarchy of issues, starting with the highest level "themes", and ending with the lowest level "tasks".

## The 6-tier hierarchy

1. Themes - Based on the codebase summary
2. Initiatives - Based on the codebase summary and must fit into a theme
3. Features - Based on the codebase summary and must fit into an initiative
4. Epics - Based on the codebase summary and must fit into a feature
5. Stories - Based on the codebase summary and must fit into an epic
    1. Acceptance Criteria - An aspect of a story that must be met for the story to be considered complete, based on the codebase summary and must fit into a story
6. Tasks - Based on the codebase summary and must fit into a story; concrete actions that must be taken to complete a story.

## Phased Generation

The system can regenerate tickets when they may become out of date with the codebase. This is done by using a phased generation process in order to maintain a balance between the system's cost/performance and the accuracy of the tickets. For example, themes may be regenerated every 6 months, while tasks may be regenerated every 2 weeks. Themes need to be regenerated less often because even when the codebase changes, the themes are still relevant. Tasks need to be regenerated more often because they are more likely to become out of date with the codebase as it changes.

## Automatic Improvements

The system also features a development agents. These agents are given the codebase summary and a task that has been generated by the system and use a several step process to propose a code chage that will complete the task.

> Currently the code change is proposed by the development agent, but the actual implementation of the code change is done by a human developer.

The intended development process is as follows:
- First the development agent identifies a relevant file.
- Then we provide the development agent with the task that needs to be completed and contents of the file and the development agent will propose a code change that will complete the task.
- The system will apply the change to the codebase and run the test suite to see if the change is correct.
- If the change is correct, the system will commit the change to the codebase and close the task.
- If the change is incorrect, the system will show the error and the development agent will try again.
- If the diff is too large, the system will revert the changes and split the task into smaller tasks. closing the original task as "too copmlex".

When a file changes, the system will analyse the current story and task tickets to see if they are still relevant. and may perform a regeneration of the tasks if necessary.

It is planned for the development agent to actually perform the iterative improvement process on the codebase with the intention of completing the task, currently we are investigating if the quality of the tickets is high enough and the quality of the generated code changes is high enough to justify this.
